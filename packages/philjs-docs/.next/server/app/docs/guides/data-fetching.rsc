2:I[8850,["1763","static/chunks/1763-be59ea8b08cc01ae.js","3778","static/chunks/app/docs/guides/data-fetching/page-dff63264f3a6a6e7.js"],"CodeBlock"]
4:I[6542,["1763","static/chunks/1763-be59ea8b08cc01ae.js","3778","static/chunks/app/docs/guides/data-fetching/page-dff63264f3a6a6e7.js"],""]
5:I[6419,[],""]
6:I[8445,[],""]
7:I[8765,["1763","static/chunks/1763-be59ea8b08cc01ae.js","3998","static/chunks/app/docs/layout-7a64e01358952c8e.js"],"Sidebar"]
8:I[8765,["1763","static/chunks/1763-be59ea8b08cc01ae.js","3998","static/chunks/app/docs/layout-7a64e01358952c8e.js"],"docsNavigation"]
9:I[1229,["1763","static/chunks/1763-be59ea8b08cc01ae.js","2793","static/chunks/2793-28ddd1020ce77999.js","3185","static/chunks/app/layout-575709e7d70e2afe.js"],"ThemeProvider"]
a:I[8529,["1763","static/chunks/1763-be59ea8b08cc01ae.js","2793","static/chunks/2793-28ddd1020ce77999.js","3185","static/chunks/app/layout-575709e7d70e2afe.js"],"Header"]
3:T443,import { createSignal, createResource, onMount } from 'philjs-core';

function InfiniteList() {
  const [items, setItems] = createSignal<Item[]>([]);
  const [cursor, setCursor] = createSignal<string | null>(null);
  const [hasMore, setHasMore] = createSignal(true);

  const [page, { refetch }] = createResource(
    cursor,
    async (cur) => {
      const res = await fetch(
        `/api/items${cur ? `?cursor=${cur}` : ''}`
      );
      return res.json();
    }
  );

  // Append new items when page loads
  createEffect(() => {
    const data = page();
    if (data) {
      setItems(prev => [...prev, ...data.items]);
      setHasMore(data.hasMore);
    }
  });

  const loadMore = () => {
    if (!page.loading && hasMore()) {
      const lastItem = items().at(-1);
      setCursor(lastItem?.id ?? null);
    }
  };

  return (
    <div>
      {items().map(item => (
        <ItemCard key={item.id} item={item} />
      ))}

      {page.loading && <Spinner />}

      {hasMore() && !page.loading && (
        <button onClick={loadMore}>Load More</button>
      )}
    </div>
  );
}0:["cd22Ei08xvul0IDkb5kRy",[[["",{"children":["docs",{"children":["guides",{"children":["data-fetching",{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],["",{"children":["docs",{"children":["guides",{"children":["data-fetching",{"children":["__PAGE__",{},[["$L1",["$","div",null,{"className":"mdx-content","children":[["$","h1",null,{"children":"Data Fetching"}],["$","p",null,{"className":"lead text-xl text-surface-600 dark:text-surface-400","children":"PhilJS provides powerful primitives for fetching, caching, and managing async data with built-in loading states, error handling, and automatic refetching."}],["$","h2",null,{"id":"resources","children":"Resources"}],["$","p",null,{"children":"Resources are the primary way to handle async data in PhilJS. They automatically track loading and error states, and re-fetch when dependencies change."}],["$","$L2",null,{"code":"import { createResource, createSignal } from 'philjs-core';\n\nfunction UserProfile() {\n  const [userId, setUserId] = createSignal(1);\n\n  // Resource automatically refetches when userId changes\n  const [user] = createResource(userId, async (id) => {\n    const response = await fetch(`/api/users/${id}`);\n    return response.json();\n  });\n\n  return (\n    <div>\n      {user.loading && <Spinner />}\n      {user.error && <Error message={user.error.message} />}\n      {user() && (\n        <div>\n          <h1>{user().name}</h1>\n          <p>{user().email}</p>\n        </div>\n      )}\n    </div>\n  );\n}","language":"typescript"}],["$","h2",null,{"id":"resource-states","children":"Resource States"}],["$","p",null,{"children":"Resources provide detailed state information:"}],["$","$L2",null,{"code":"const [data, { mutate, refetch }] = createResource(source, fetcher);\n\n// Accessor - returns the data or undefined\ndata();\n\n// Loading state\ndata.loading;    // true while fetching\ndata.state;      // 'pending' | 'ready' | 'refreshing' | 'errored'\n\n// Error handling\ndata.error;      // Error object if failed\n\n// Latest value (even during refetch)\ndata.latest;     // Previous value while refreshing\n\n// Control functions\nrefetch();       // Force refetch\nmutate(newData); // Update data optimistically","language":"typescript"}],["$","h2",null,{"id":"suspense","children":"Suspense Integration"}],["$","p",null,{"children":"Resources integrate seamlessly with Suspense for declarative loading states:"}],["$","$L2",null,{"code":"import { Suspense, createResource } from 'philjs-core';\n\nfunction App() {\n  return (\n    <Suspense fallback={<PageSkeleton />}>\n      <Dashboard />\n    </Suspense>\n  );\n}\n\nfunction Dashboard() {\n  const [metrics] = createResource(async () => {\n    const res = await fetch('/api/metrics');\n    return res.json();\n  });\n\n  // Component suspends until data is ready\n  return (\n    <div>\n      <MetricsGrid data={metrics()} />\n    </div>\n  );\n}","language":"typescript"}],["$","h2",null,{"id":"error-boundaries","children":"Error Boundaries"}],["$","$L2",null,{"code":"import { ErrorBoundary, createResource } from 'philjs-core';\n\nfunction App() {\n  return (\n    <ErrorBoundary\n      fallback={(error, reset) => (\n        <div>\n          <p>Something went wrong: {error.message}</p>\n          <button onClick={reset}>Try again</button>\n        </div>\n      )}\n    >\n      <Suspense fallback={<Loading />}>\n        <DataComponent />\n      </Suspense>\n    </ErrorBoundary>\n  );\n}","language":"typescript"}],["$","h2",null,{"id":"server-functions","children":"Server Functions"}],["$","p",null,{"children":"Server functions allow you to run code on the server and call it from the client:"}],["$","$L2",null,{"code":"// server/api.ts\n'use server';\n\nimport { db } from './db';\n\nexport async function getUsers() {\n  return db.users.findMany();\n}\n\nexport async function createUser(data: { name: string; email: string }) {\n  return db.users.create({ data });\n}\n\nexport async function deleteUser(id: string) {\n  return db.users.delete({ where: { id } });\n}\n\n// client component\nimport { getUsers, createUser, deleteUser } from './server/api';\nimport { createResource } from 'philjs-core';\n\nfunction UserList() {\n  const [users, { refetch }] = createResource(getUsers);\n\n  const handleCreate = async () => {\n    await createUser({ name: 'New User', email: 'new@example.com' });\n    refetch();\n  };\n\n  return (\n    <div>\n      {users()?.map(user => (\n        <UserCard key={user.id} user={user} onDelete={deleteUser} />\n      ))}\n      <button onClick={handleCreate}>Add User</button>\n    </div>\n  );\n}","language":"typescript"}],["$","h2",null,{"id":"caching","children":"Caching Strategies"}],["$","$L2",null,{"code":"import { createResource, cache } from 'philjs-core';\n\n// Simple in-memory cache\nconst cachedFetch = cache(async (id: string) => {\n  const res = await fetch(`/api/items/${id}`);\n  return res.json();\n});\n\n// Use cached function as fetcher\nconst [item] = createResource(itemId, cachedFetch);\n\n// Configure cache behavior\nconst cachedWithOptions = cache(fetcher, {\n  // Cache key generator\n  key: (args) => args.join('-'),\n  // Time-to-live in milliseconds\n  ttl: 5 * 60 * 1000, // 5 minutes\n  // Stale-while-revalidate\n  staleWhileRevalidate: true,\n  // Maximum cache entries\n  maxSize: 100,\n});","language":"typescript"}],["$","h2",null,{"id":"parallel-fetching","children":"Parallel & Sequential Fetching"}],["$","$L2",null,{"code":"import { createResource, createSignal } from 'philjs-core';\n\nfunction Dashboard() {\n  // Parallel fetching - both start immediately\n  const [users] = createResource(fetchUsers);\n  const [products] = createResource(fetchProducts);\n  const [orders] = createResource(fetchOrders);\n\n  return (\n    <Suspense fallback={<Loading />}>\n      <UsersWidget data={users()} />\n      <ProductsWidget data={products()} />\n      <OrdersWidget data={orders()} />\n    </Suspense>\n  );\n}\n\n// Sequential fetching - one depends on another\nfunction UserOrders() {\n  const [userId] = createSignal(1);\n  const [user] = createResource(userId, fetchUser);\n\n  // Only fetches after user is loaded\n  const [orders] = createResource(\n    () => user()?.id,\n    (id) => id && fetchOrdersForUser(id)\n  );\n\n  return (\n    <Suspense fallback={<Loading />}>\n      <UserInfo user={user()} />\n      <OrdersList orders={orders() ?? []} />\n    </Suspense>\n  );\n}","language":"typescript"}],["$","h2",null,{"id":"optimistic-updates","children":"Optimistic Updates"}],["$","$L2",null,{"code":"import { createResource } from 'philjs-core';\n\nfunction TodoList() {\n  const [todos, { mutate, refetch }] = createResource(fetchTodos);\n\n  const addTodo = async (text: string) => {\n    // Optimistically add the todo\n    const optimisticTodo = {\n      id: 'temp-' + Date.now(),\n      text,\n      done: false,\n    };\n    mutate(prev => [...(prev ?? []), optimisticTodo]);\n\n    try {\n      // Actually create on server\n      const newTodo = await createTodo(text);\n      // Replace optimistic with real\n      mutate(prev =>\n        prev?.map(t => t.id === optimisticTodo.id ? newTodo : t) ?? []\n      );\n    } catch (error) {\n      // Rollback on error\n      mutate(prev => prev?.filter(t => t.id !== optimisticTodo.id) ?? []);\n      throw error;\n    }\n  };\n\n  return (\n    <ul>\n      {todos()?.map(todo => (\n        <li key={todo.id}>{todo.text}</li>\n      ))}\n    </ul>\n  );\n}","language":"typescript"}],["$","h2",null,{"id":"rust-data-fetching","children":"Data Fetching in Rust"}],["$","$L2",null,{"code":"use philjs::prelude::*;\n\n#[component]\nfn UserProfile() -> Element {\n    let user_id = use_signal(|| 1u32);\n\n    let user = use_resource(move || async move {\n        let id = user_id();\n        reqwest::get(&format!(\"/api/users/{}\", id))\n            .await?\n            .json::<User>()\n            .await\n    });\n\n    view! {\n        <Suspense fallback=|| view! { <Spinner /> }>\n            {move || user.read().map(|u| view! {\n                <div>\n                    <h1>{u.name}</h1>\n                    <p>{u.email}</p>\n                </div>\n            })}\n        </Suspense>\n    }\n}\n\n// Server function\n#[server]\nasync fn get_users() -> Result<Vec<User>, ServerError> {\n    let users = db::users::find_all().await?;\n    Ok(users)\n}","language":"rust"}],["$","h2",null,{"id":"pagination","children":"Pagination"}],["$","$L2",null,{"code":"import { createResource, createSignal } from 'philjs-core';\n\nfunction PaginatedList() {\n  const [page, setPage] = createSignal(1);\n  const [pageSize] = createSignal(20);\n\n  const [data] = createResource(\n    () => ({ page: page(), pageSize: pageSize() }),\n    async ({ page, pageSize }) => {\n      const res = await fetch(\n        `/api/items?page=${page}&pageSize=${pageSize}`\n      );\n      return res.json();\n    }\n  );\n\n  return (\n    <div>\n      <Suspense fallback={<TableSkeleton />}>\n        <table>\n          {data()?.items.map(item => (\n            <tr key={item.id}>{/* ... */}</tr>\n          ))}\n        </table>\n      </Suspense>\n\n      <Pagination\n        page={page()}\n        totalPages={data()?.totalPages ?? 1}\n        onPageChange={setPage}\n      />\n    </div>\n  );\n}","language":"typescript"}],["$","h2",null,{"id":"infinite-scroll","children":"Infinite Scroll"}],["$","$L2",null,{"code":"$3","language":"typescript"}],["$","h2",null,{"id":"best-practices","children":"Best Practices"}],["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Use Suspense boundaries:"}]," Wrap data-dependent UI for clean loading states"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Implement error boundaries:"}]," Handle failures gracefully"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Cache wisely:"}]," Balance freshness with performance"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Optimize for waterfalls:"}]," Fetch data in parallel when possible"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Use server functions:"}]," Keep sensitive logic on the server"]}]]}],["$","h2",null,{"id":"next-steps","children":"Next Steps"}],["$","div",null,{"className":"grid md:grid-cols-2 gap-4 mt-6 not-prose","children":[["$","$L4",null,{"href":"/docs/guides/state-management","className":"block p-4 border border-surface-200 dark:border-surface-700 rounded-lg hover:border-primary-300 dark:hover:border-primary-700 transition-colors","children":[["$","h3",null,{"className":"font-semibold text-surface-900 dark:text-white","children":"State Management"}],["$","p",null,{"className":"text-sm text-surface-600 dark:text-surface-400 mt-1","children":"Learn about stores and global state"}]]}],["$","$L4",null,{"href":"/docs/api/core","className":"block p-4 border border-surface-200 dark:border-surface-700 rounded-lg hover:border-primary-300 dark:hover:border-primary-700 transition-colors","children":[["$","h3",null,{"className":"font-semibold text-surface-900 dark:text-white","children":"API Reference"}],["$","p",null,{"className":"text-sm text-surface-600 dark:text-surface-400 mt-1","children":"Complete createResource documentation"}]]}]]}]]}],null],null],null]},[null,["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children","docs","children","guides","children","data-fetching","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[null,["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children","docs","children","guides","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[null,["$","div",null,{"className":"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8","children":["$","div",null,{"className":"flex gap-12","children":[["$","$L7",null,{"sections":"$8"}],["$","main",null,{"className":"flex-1 min-w-0","children":["$","article",null,{"className":"prose prose-surface dark:prose-invert max-w-none","children":["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children","docs","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]}]}]]}]}]],null],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/00bb994365e07be9.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__variable_f367f3 __variable_3c557b font-sans antialiased","children":["$","$L9",null,{"children":["$","div",null,{"className":"min-h-screen bg-white dark:bg-surface-950","children":[["$","$La",null,{}],["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}]]}]}]}]}]],null],null],["$Lb",null]]]]
b:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Data Fetching - PhilJS Guide | PhilJS"}],["$","meta","3",{"name":"description","content":"Learn how to fetch, cache, and manage async data in PhilJS applications with resources and server functions."}],["$","meta","4",{"name":"author","content":"PhilJS Team"}],["$","link","5",{"rel":"manifest","href":"/site.webmanifest","crossOrigin":"use-credentials"}],["$","meta","6",{"name":"keywords","content":"philjs,javascript,typescript,rust,framework,signals,reactivity,wasm"}],["$","meta","7",{"property":"og:title","content":"PhilJS - The Modern Web Framework"}],["$","meta","8",{"property":"og:description","content":"A fast, modern web framework with fine-grained reactivity and optional Rust integration."}],["$","meta","9",{"property":"og:url","content":"https://philjs.dev/"}],["$","meta","10",{"property":"og:site_name","content":"PhilJS"}],["$","meta","11",{"property":"og:locale","content":"en_US"}],["$","meta","12",{"property":"og:image","content":"https://philjs.dev/og-image.png"}],["$","meta","13",{"property":"og:image:width","content":"1200"}],["$","meta","14",{"property":"og:image:height","content":"630"}],["$","meta","15",{"property":"og:image:alt","content":"PhilJS Framework"}],["$","meta","16",{"property":"og:type","content":"website"}],["$","meta","17",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","18",{"name":"twitter:title","content":"PhilJS - The Modern Web Framework"}],["$","meta","19",{"name":"twitter:description","content":"A fast, modern web framework with fine-grained reactivity and optional Rust integration."}],["$","meta","20",{"name":"twitter:image","content":"https://philjs.dev/og-image.png"}],["$","link","21",{"rel":"shortcut icon","href":"/favicon-16x16.png"}],["$","link","22",{"rel":"icon","href":"/favicon.ico"}],["$","link","23",{"rel":"apple-touch-icon","href":"/apple-touch-icon.png"}]]
1:null
